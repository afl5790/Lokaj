<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>ZARA - The Space Explorer AI</title>
	<link rel="stylesheet" href="../../css/styles.css">
	<script src="elizabot.js"></script>
	<script src="elizadata.js"></script>
	<script>
		var eliza = new ElizaBot();
		var elizaLines = [];
		var displayCols = 60;
		var displayRows = 20;

		function elizaReset() {
			eliza.reset();
			elizaLines.length = 0;
			elizaStep();
		}

		function elizaStep() {
			var f = document.forms.e_form;
			var userinput = f.e_input.value;
			if (eliza.quit) {
				f.e_input.value = '';
				if (confirm("Transmission terminated.\nInitiate new sequence?")) elizaReset();
				f.e_input.focus();
				return;
			} else if (userinput != '') {
				var usr = 'YOU:   ' + userinput;
				var rpl = 'ZARA: ' + eliza.transform(userinput);
				elizaLines.push(usr);
				elizaLines.push(rpl);
				var temp  = [];
				var l = 0;
				for (var i = elizaLines.length - 1; i >= 0; i--) {
					l += 1 + Math.floor(elizaLines[i].length/displayCols);
					if (l >= displayRows) break;
					temp.push(elizaLines[i]);
				}
				elizaLines = temp.reverse();
				f.e_display.value = elizaLines.join('\n');
			} else if (elizaLines.length == 0) {
				var initial = 'ZARA: ' + eliza.getInitial();
				elizaLines.push(initial);
				f.e_display.value = initial + '\n';
			}
			f.e_input.value = '';
			f.e_input.focus();
		}
	</script>
</head>
<body onload="window.setTimeout('elizaReset()',100)">
	<header style="text-align: center; padding: 20px; background-color: var(--primary); color: var(--accent); border-bottom: 2px solid var(--border);">
		<h2>ZARA - Space Explorer AI</h2>
		<p>Transmission connected. Engage in conversation below.</p>
	</header>
	<main style="max-width: 800px; margin: 40px auto; padding: 20px; background: var(--primary); border-radius: 10px; box-shadow: 0px 4px 10px rgba(255, 64, 129, 0.2);">
		<form name="e_form" onsubmit="elizaStep();return false" style="text-align: center;">
			<textarea name="e_display" cols="60" rows="20" readonly style="width: 100%; border-radius: 8px; background-color: #0d1117; color: var(--text-main); border: 1px solid var(--border); padding: 10px;"></textarea><br><br>
			<input type="text" name="e_input" size="50" style="padding: 10px; border-radius: 5px; border: 1px solid var(--border); background-color: #161b22; color: var(--text-main);">
			<input type="submit" value="Send" style="background-color: var(--accent); color: white; border: none; padding: 10px 20px; font-weight: bold; border-radius: 5px; cursor: pointer;">
			<input type="reset" value="Reset" onclick="window.setTimeout('elizaReset()',100)" style="background-color: #d6006e; color: white; border: none; padding: 10px 20px; font-weight: bold; border-radius: 5px; cursor: pointer;">
		</form>
	</main>
	<footer style="text-align: center; padding: 15px; background-color: var(--primary); color: var(--text-muted); border-top: 2px solid var(--border);">
		<p>AI Communication Channel // ZARA v1.0 // Lost in Sector 7G</p>
	</footer>
</body>
</html>